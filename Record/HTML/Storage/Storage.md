# Cookie, Local Storage, Session Storage

### 정의

Cookie, Local Storage, Session Storage 이 세개의 기술은 모두 key-value 쌍으로 데이터를 저장하고 키를 기반으로 데이터를 조회하는 저장소 메커니즘이다.<br>

또한 모두 동일 출처 정책(SOP) 을 따르기 때문에 다른 도메인에서 접근할 수 없다.<br>

|                             |                        Cookie                        |     Local Storage      |    Session Storage    |
| :-------------------------: | :--------------------------------------------------: | :--------------------: | :-------------------: |
|           생성자            | 클라이언트/서버, 서버는 Set-Cookie를 사용할 수 있다. |       클라이언트       |      클라이언트       |
|            만료             |                   설정 여부에 따름                   | 명시적으로 지울 때까지 | 탭/윈도우 닫을 때까지 |
| HTTP요청과 함께 서버로 전송 |            `Cookie`헤더를 통해 자동 전송             |         전송X          |         전송X         |
|            용량             |                         4KB                          |          5MB           |          5MB          |
|           접근성            |                     모든 윈도우                      |      모든 윈도우       |     같은 브라우저     |

### 차이점

- Cookie와 Web Storage(Local Storage + Session Storage) 차이점

  - 쿠키는 자동으로 서버에 전송된다.

    웹 사이트에서 쿠키를 설정 시, 이후 모든 요청은 쿠키정보를 포함하여 서버로 전송된다.

    반면 Web Storage는 저장된 데이터가 클라이언트에 존재할 뿐 전송은 이루어지지 않는다.

  - 단순 문자열을 넘어 스크립트 객체 정보를 저장할 수 있다.

    쿠키는 value가 반드시 문자열이어야 하지만 Web Storage는 브라우저 지원 여부에 따라 문자열 외에 객체를 저장하는 것을 지원하기도 한다.

  - 용량의 제한

    하나의 웹사이트에서 저장할 수 있는 최대 쿠키의 수는 20개이며 용량도 4KB로 한정되어 있다.

    반면 Web Storage는 5MB까지 저장할 수 있다.

  - 만료 기간이 존재

    쿠키는 만료기간이 존재해 언젠가 제거된다.

    Web Storage는 만료기간이 존재하지 않아 한번 저장한 데이터는 영구적으로 저장할 수 있다.

- Local Storage와 Session Storage 차이점

  - 데이터 유지 측면

    Local Storage는 도메인 별로 로컬 스토리지가 생성되며 저장한 데이터를 명시적으로 지우지 않는 이상 영구적으로 저장이 가능하다.

    하지만 Session Storage는 브라우저가 종료되면 데이터도 같이 삭제된다. 이는 Cookie와 성질이 비슷하다.

  - 데이터 범위 측면

    Session Storage는 Local Storage와 달리 같은 사이트의 같은 도메인이라 할지라도 브라우저가 다르면 서로 다른 영역이 된다.

    예를 들어 크롬과 익스플로러로 같은 사이트를 접근했을 때 서로 별개의 Session Storage를 가지고 있다. 반면, Local Storage는 같다.
